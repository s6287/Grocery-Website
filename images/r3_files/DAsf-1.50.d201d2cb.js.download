(()=>{function e(e){return e&&e.__esModule?e.default:e}function t(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}let a=()=>{var e;return null===(e=window.P)||void 0===e?void 0:e.AUI_BUILD_DATE},n=(e,t,a)=>(...n)=>{try{e(...n)}catch(e){null==t||t(a||"Error in handler",e)}},i=e=>"V"===e,o={1027:"Sponsored Display DRA"},r=(e,t)=>i(e)&&!o.hasOwnProperty(t),s={1:"Enabled",0:"NotEnabled","-1":"Unknown"},l=e=>d(e),d=e=>decodeURIComponent(escape(atob(e))),c=e=>e&&0===Object.keys(e).length&&e.constructor===Object;var m={};t(m,"sendCsmLatencyMetric",()=>H),t(m,"sendCsmCounter",()=>O),t(m,"isUeCountAvailable",()=>W),t(m,"addCsmTag",()=>B),t(m,"incrementPlacementCounter",()=>g),t(m,"incrementCounter",()=>b),t(m,"addTag",()=>D),t(m,"addPlacementTag",()=>I),t(m,"sendLatencyMetric",()=>_);var u=/(\/b|\/s|\/l).*(node=)(\d{1,12})/,h=new Map,p=function(){if(!h.has(window.location.href)){var e=u.exec(window.location.href),t=e&&e[3]?e[3]:null;h.set(window.location.href,t)}return h.get(window.location.href)},w=function(e){var t=p();if(!e||!t)return null;var a=e.split(":");return a.splice(a.length-1,0,t),a.join(":")},f=function(e){var t=p();return t?"".concat(e,":").concat(t):null},v=function(e){return e.replace(/_/g,":")},g=function(e,t,a){if(void 0===a&&(a=1),y()){var n=function(e,t,a){t&&S("".concat(E(e),":").concat(t),a)};n(e,t.id,a),n(e,f(t.id),a),n(e,v(t.name),a),n(e,w(v(t.name)),a)}},b=function(e,t){void 0===t&&(t=1),y()&&S(E(e),t)},y=function(){var e;return"function"==typeof(null===(e=null==window?void 0:window.ue)||void 0===e?void 0:e.count)},S=function(e,t){var a;return null===(a=null==window?void 0:window.ue)||void 0===a?void 0:a.count(e,t)},A="adplacements",E=function(e){return e.startsWith(A)?e:"".concat(A,":").concat(e)},I=function(e,t,a){T()&&(k(C(e,t.id,a)),k(C(e,v(t.name),a)))},D=function(e,t){T()&&k(e+M(t))},T=function(){var e;return"function"==typeof(null===(e=null==window?void 0:window.ue)||void 0===e?void 0:e.tag)},k=function(e){var t;return null===(t=null==window?void 0:window.ue)||void 0===t?void 0:t.tag(e)},C=function(e,t,a){return"".concat(e,":").concat(t).concat(M(a))},M=function(e){return e?":".concat(e):""},R={bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"},_=function(e){var t,a,n=e.latencyEvent,i=e.scope,o=e.placement,r=e.timestamp;L(n)&&(x(n,F(i),o.id,r),x(n,F(i),v(o.name),r),x(n,F(i),null!==(t=w(o.name))&&void 0!==t?t:void 0,r),x(n,F(i),null!==(a=f(o.id))&&void 0!==a?a:void 0,r))},L=function(e){return"function"==typeof window[R[e]]},x=function(e,t,a,n){void 0===n&&(n=new Date);var i=R[e];a&&"function"==typeof window[i]&&window[i](e,t+a,{wb:1},n)},F=function(e){return"adplacements:"+N(e)},N=function(e){return e?"".concat(e,":"):""},z={bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"},H=function(e,t,a,n,i){var o=z[e];if("function"==typeof window[o]){var r=function(t,a){a&&window[t](e,"adplacements:"+(n?n+":":"")+a,{wb:1},i)},s=t.replace(/_/g,":");r(o,s),r(o,w(s)),a&&(r(o,a),r(o,f(a)))}},O=function(e,t,a,n){if(W()){var i="adplacements:"+a,o=function(e,t){e&&window.ue.count("".concat(i,":").concat(e),t)};if(e){var r=e.replace(/_/g,":");o(r,n),o(w(r),n)}t&&(o(t,n),o(f(t),n)),!e&&!t&&window.ue.count(i,n)}},W=function(){var e;return"function"==typeof(null===(e=null==window?void 0:window.ue)||void 0===e?void 0:e.count)};function B(e,t,a,n){var i;if(null===(i=null==window?void 0:window.ue)||void 0===i?void 0:i.tag){if(t){var o=e+":"+t.replace(/_/g,":")+(n?":"+n:"");window.ue.tag(o)}if(a){var r=e+":"+a+(n?":"+n:"");window.ue.tag(r)}!(t||a)&&window.ue.tag(e+(n?":"+n:""))}}var U={};t(U,"latency",()=>J),t(U,"events",()=>Q);var $={ERROR:"ERROR"},j=function(e,t){var a=t||Error(e);console.error(e,t),b("safeFrameError"),window.ueHostLogError&&window.ueHostLogError(a,{logLevel:$.ERROR,attribution:"APE-safeframe",message:e+" "})},q=function(e){var t=this;if(this.mark=function(e,a){if(t.latencyPlugin)try{t.latencyPlugin("mark",e,a)}catch(e){j("Error with 'markCsaLatencyMetric' CSA",e)}},window.csa)try{this.latencyPlugin=window.csa("Content",{element:e})}catch(e){j("Error with initiating CSA",e)}},V=function(){var e=this;if(this.log=function(t,a,n){if(e.events)try{e.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:t+":"+a+":"+n,metricValue:1},{ent:"all"})}catch(e){j("Error with 'logCsaEvent' CSA",e)}},this.setEntity=function(t){if(e.events)try{e.events("setEntity",{adCreativeMetaData:t})}catch(e){j("Error with 'addCsaEntity' CSA",e)}},window.csa)try{this.events=window.csa("Events",{producerId:"adplacements"})}catch(e){j("Error with initiating CSA",e)}};function J(e){return new q(e)}function Q(){return new V}let Y=new class e{constructor(){this.latencyPlugin=void 0,this.events=void 0}},K=e=>{window.csa&&(Y.latencyPlugin=window.csa("Content",{element:e}))},X=(e,t)=>{try{Y.latencyPlugin("mark",e,t)}catch(e){j("Error with initiating CSA",e)}},G=()=>{window.csa&&!Y.events&&(Y.events=window.csa("Events",{producerId:"adplacements"}))},Z=(e,t,a)=>{G();try{Y.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t+":"+a,metricValue:1},{ent:"all"})}catch(e){j("Error with initiating CSA",e)}},ee=e=>{G();try{Y.events("setEntity",{adCreativeMetaData:e})}catch(e){j("Error with initiating CSA",e)}};class et{sendLatencyMetric({latencyMetricType:e,placementId:t,placementName:a,timestamp:n}){m.sendCsmLatencyMetric(e.csmKey,a,t,e.csmMessage,null==n?void 0:n.getTime()),function(e,t,a){let n=function(e){return document.getElementById(function(e){return"ape_"+e+"_placement"}(e))}(t);n&&(K(n),X(e.csaKey,null==a?void 0:a.getTime()))}(e,a,n)}}let ea=()=>new et;var en=function(e,t,a){if(""===t)throw Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));var n=new URL(e),i=n.searchParams.get(t),o=Object.assign(JSON.parse(i||"{}"),a);return n.searchParams.set(t,JSON.stringify(o)),n.toString()};function ei(e,t,a){var n,i=a||{},o=i.noTrailing,r=void 0!==o&&o,s=i.noLeading,l=void 0!==s&&s,d=i.debounceMode,c=void 0===d?void 0:d,m=!1,u=0;function h(){n&&clearTimeout(n)}function p(){for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=this,d=Date.now()-u;function p(){u=Date.now(),t.apply(s,i)}function w(){n=void 0}!m&&(!l&&c&&!n&&p(),h(),void 0===c&&d>e?l?(u=Date.now(),!r&&(n=setTimeout(c?w:p,e))):p():!0!==r&&(n=setTimeout(c?w:p,void 0===c?e-d:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly;h(),m=!(void 0!==t&&t)},p}let eo="com.amazon.ads.cpp.",er=(e,t)=>`${eo}${e}.${t}`;class es{*[Symbol.iterator](){for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);if(null==t?void 0:t.startsWith(eo)){let a=localStorage.getItem(t);if(localStorage.removeItem(t),e=-1,null===a)continue;yield[t,a]}}}}let el=(e,t,a)=>{localStorage.setItem(er(e,t),a)},ed=()=>new es,ec=(e,t)=>{localStorage.removeItem(er(e,t))},em=e=>!e||eu(e)||eh(e)?e:e+"px",eu=e=>e.length>1&&"%"===e.charAt(e.length-1),eh=e=>e.length>2&&"px"===e.substring(e.length-2),ep=(e,t)=>{let a=document.createElement("iframe");return a.id=t,a.height=em(e.size.height)||"250px",a.width=em(e.size.width)||"300px",a.className=e.iframeClass||"",a.setAttribute("frameborder","0"),a.setAttribute("marginheight","0"),a.setAttribute("marginwidth","0"),a.setAttribute("scrolling","no"),a.setAttribute("allowtransparency","true"),a.setAttribute("data-arid",e.arid),a.style.cssText=e.iframeExtraStyle||"",a},ew=["allow-scripts","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"].concat(["allow-same-origin"]),ef=(e,t,a)=>{let n=ep(e,t);return n.src=a,n.sandbox=ew.join(" "),n},ev=(e,t)=>{var a,n;let i=e[t].options;if(c(e)||c(i))return null;let o="ape_"+i.slot+"_iframe";return e[t].iframe&&(e[t].iframe=(null===(n=null===(a=e[t])||void 0===a?void 0:a.iframe)||void 0===n?void 0:n.innerHTML)?e[t].iframe:document.getElementById(o)),e[t].iframe},eg=()=>window.innerHeight||document.documentElement.clientHeight,eb=()=>window.innerWidth||document.documentElement.clientWidth,ey=()=>window.scrollY+eg(),eS=e=>{let t=e.getBoundingClientRect();return t.top-eg()},eA=(e,t)=>{let a=t||(null==e?void 0:e.getBoundingClientRect()),n={t:a.top,l:a.left,r:a.right,b:a.bottom,w:a.width,h:a.height,z:e?Number(window.getComputedStyle(e,null).zIndex):NaN};return n},eE=(e,t)=>{let a=eA(e,t),n=eC(a),i={t:a.t,l:a.l,r:a.r,b:a.b,w:a.w,h:a.h,z:a.z,xiv:n.xiv,yiv:n.yiv,iv:n.iv};return i},eI=()=>{let e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,a=eb(),n=eg();return{t:e,l:t,w:a,h:n,b:e+n,r:t+a}},eD=e=>{let t=eI(),a=eE(e),n=eM(e),i={atf:eT(e),geom:{win:t,self:a,exp:n},payload:{wh:t.h,ww:t.w,sx:window.scrollX,sy:window.scrollY,ah:a.h,aw:a.w,top:a.t,left:a.l}};return i},eT=e=>{let t=function(e){let t=document.body.getBoundingClientRect();if(ek(t))return null;let a=eA(e,null),n=eg(),i=eb(),o=Math.max(0,Math.min(t.left+i,a.r)-a.l),r=Math.max(0,Math.min(t.top+n,a.b)-a.t),s=o*r/(a.h*Math.min(a.w,i)),l=Number(Math.min(1,Math.max(0,s)).toFixed(2));return l}(e);return null==t?"unknown":!!(t>=.5)||!1},ek=e=>0===e.width&&0===e.height,eC=e=>{let t=eb(),a=eg(),n=Math.max(0,eR(e.t,e.b,a)),i=Math.max(0,eR(e.l,e.r,t)),o=n*i,r=e.h*Math.min(e.w,t);return 0===r&&0===o?{xiv:0,yiv:0,iv:0}:{xiv:Number(Math.min(1,i/e.w).toFixed(2)),yiv:Number(Math.min(1,n/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,o/r)).toFixed(2))}},eM=(e,t)=>{let a=t||(null==e?void 0:e.getBoundingClientRect()),n={t:a.top,l:a.left,r:eb()-a.right,b:eg()-a.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>eb()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>eg()?1:0};return n},eR=(e,t,a)=>{let n=0;return"visible"!==document.visibilityState?n:Math.min(n=e>0?a-e:t>0?Math.min(t,a):0,t-e)},eP=(e,t)=>{let a=eA(e),n=eA(t),i=eb(),o=eg();return a&&n&&(Math.abs(a.t-n.b)<o||Math.abs(a.b-n.t)<o)&&(Math.abs(a.l-n.r)<i||Math.abs(a.r-n.l)<i)},e_=e=>{let t=e.getBoundingClientRect();return{initialBoundingRect:t,adHeight:e.offsetHeight,adWidth:e.offsetWidth,originalScrollX:window.scrollX,originalScrollY:window.scrollY}},eL=e=>{let t=ex(e),a=eI(),n=eE(null,t),i=eM(null,t),o={atf:"unknown",geom:{win:a,self:n,exp:i},payload:{wh:a.h,ww:a.w,sx:window.scrollX,sy:window.scrollY,ah:n.h,aw:n.w,top:n.t,left:n.l}};return o},ex=e=>{let t=e.initialBoundingRect,a=t.top-(window.scrollY-e.originalScrollY),n=a+e.adHeight,i=t.left-(window.scrollX-e.originalScrollX),o=i+e.adWidth;return{top:a,bottom:n,left:i,right:o,width:e.adWidth,height:e.adHeight}},eF="localstorage_impression",eN=(e,t)=>{let a=document.createElement("img");return a.id=e,a.style.display="none",a.src=t,{img:a,completed:new Promise((e,t)=>(a.onload=()=>e(),a.onerror=(e,a,n,i,o)=>t(o),a))}},ez="localstorage:impression",eH=async(e,t)=>{let a,n;return new Promise(i=>{n=i,(a=new IntersectionObserver(t=>{t.forEach(t=>{t.target===e&&t.isIntersecting&&(n(t),a.unobserve(e))})},t)).observe(e)})};var eO={};eO=function(e){try{var t=window[e],a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(e){return!1}};let eW="sfImpression",eB="LightAdImpression",eU=(e,t,a)=>({csaKey:e,csmKey:t,csmMessage:a}),e$=eU("bodyBegin","bb",eW);eU("bodyBegin","bb",eB),eU("bodyEnd","be");let ej=eU("clickToATF","af"),eq=eU("criticalFeature","cf");eU("criticalFeature","cf",eW),eU("criticalFeature","cf",eB),eU("loaded","ld"),eU("loaded","ld",eW),eU("loaded","ld",eB);let eV=eU("viewablelatency:loaded","ld","viewablelatency"),eJ="Need AUI or AmazonJQ installed",eQ=async(e,t)=>{let a="undefined"!=typeof P,n="undefined"!=typeof amznJQ,i=/^reached(\d{1,5}px)FromTop$/g.exec(e);if(""!==e&&"immediate"!==e)if("windowOnLoad"===e){if("complete"!==document.readyState)return await new Promise(e=>window.addEventListener("load",()=>e(),{once:!0}))}else if("spATFEvent"===e){if(a)return await new Promise(e=>P.when("search-page-utilities").execute(t=>{window.searchPageUtils.afterEvent("spATFEvent",()=>{e()})}));if(n)return await new Promise(e=>amznJQ.available("search-js-general",()=>{window.SPUtils.afterEvent("spATFEvent",e)}));else throw Error(eJ)}else if("aboveTheFold"===e){if(a)return await new Promise(e=>P.when("af").execute(e));if(n)return await new Promise(e=>amznJQ.onCompletion("amznJQ.AboveTheFold",e));else throw Error(eJ)}else if("criticalFeature"===e){if(a)return await new Promise(e=>P.when("cf").execute(e));if(n)return await new Promise(e=>amznJQ.onCompletion("amznJQ.criticalFeature",e));else throw Error(eJ)}else if("r2OnLoad"===e){if(a)return await new Promise(e=>P.when("r2Loaded").execute(e));if(n)return await new Promise(e=>amznJQ.onReady("r2Loaded",e));else throw Error(eJ)}else if(e.match("[^:]+:.+")){let t=e.split(":"),n=t[1],i=t.length>2?t[2]:n;if(a)return await new Promise(e=>P.when(i,"A").execute(e));throw Error(eJ)}else{if(e.match(/^\d{1,4}px$/g))return await eK(parseInt(e,10),t,(e,t)=>{let a=eS(e);return e&&a<=t});if(i)return await eK(parseInt(i[1],10),t,eY);Error(`Unkown delay pattern ${e}`)}},eY=(e,t)=>ey()>=t,eK=async(e,t,a)=>new Promise(i=>{let o=()=>{a(t,e)&&(i(),window.removeEventListener("scroll",r),window.removeEventListener("resize",r))},r=n(ei(20,()=>{o()}),j);window.addEventListener("scroll",r),window.addEventListener("resize",r),o()}),eX=(e,t,a,n)=>{var i;let o=(null==window?void 0:window.apeViewableLatencyTrackers)&&(null===(i=null==window?void 0:window.apeViewableLatencyTrackers)||void 0===i?void 0:i[e]);(null==o?void 0:o.valid)&&(o.loaded=!0,o.viewed&&(ea().sendLatencyMetric({latencyMetricType:eV,placementId:a,placementName:t,timestamp:new Date(n)}),g("htmlviewed:loaded",{id:a,name:t})))},eG=async(e,t,a,n)=>{a.options.firePixelsAfter&&await eQ(a.options.firePixelsAfter,a.slot),await e3(t.adMap,a.options.arid),e.sendMessageToAd(a.options.arid,"fireImpression",n),eZ(e,t,a,n)},eZ=(e,t,a,n)=>{n.isNoInventory?e1(e,t,a):e0(e,t,a)},e0=(e,t,a)=>{e5(e,t.adMap,a.options.arid);let n=t.ADS_HANDLERS[a.options.arid];n.viewabilityTracker=()=>{let n=ei(50,e5);n(e,t.adMap,a.options.arid)},e2(n.viewabilityTracker);let i=new IntersectionObserver(()=>{e5(e,t.adMap,a.options.arid)},{threshold:[0,.5,1]});i.observe(a.slot)},e1=(e,t,a)=>{let n=e4(t.adMap,a.options.arid);t.adMap[a.options.arid].noInventorySlotSnapshot=n,e7(e,t.adMap,a.options.arid,n),e.sendMessageToAd(a.options.arid,"handleFallbackBehavior",{});let i=t.ADS_HANDLERS[a.options.arid];i.noInventoryViewabilityTracker=()=>{let i=ei(20,e7);i(e,t.adMap,a.options.arid,n)},e2(i.noInventoryViewabilityTracker)},e2=e=>{window.addEventListener("scroll",e),window.addEventListener("resize",e),document.addEventListener("visibilitychange",e)},e3=async(e,t)=>{let a=ev(e,t),n={root:document.documentElement};await eH(a,n)},e5=(e,t,a)=>{let n=t[a].options,i=ev(t,a),o=n.viewabilityStandards,r=eD(i);r.viewabilityStandards=o,e.sendMessageToAd(a,"updateViewability",r)},e7=(e,t,a,n)=>{let i=t[a].options,o=i.viewabilityStandards,r=eL(n);r.viewabilityStandards=o,e.sendMessageToAd(a,"updateViewability",r)},e4=(e,t)=>{let a=ev(e,t);return e_(a)},e6=e=>{try{e8(e,document.body),b(ez,1),Z(eF)}catch(e){b("localstorage:error",1),Z("localstorage_error")}},e9=()=>{if(e(eO)("localStorage"))for(let e of ed()){let t=e[1];e6(t)}},e8=async(e,t)=>{let a=en(e,"pj",{measurementMethod:"cod_client"});try{let{img:e,completed:n}=eN("ape_impression",a);t.appendChild(e),await n,b(ez+"loaded"),Z(eF+"loaded")}catch(e){throw b(ez+"error"),Z(eF+"error"),e}b("impressionFired")},te=(e,t)=>{for(let a of Object.keys(t))e.style[a]=t[a];return e};class tt{constructor(e,t){this.weblabsWindow=e,this.prefix=t,this.isT1=()=>"t1"===this.weblabTreatment(),this.weblabTreatment=()=>{var e,t,a;return null===(a=null===(t=null===(e=this.weblabsWindow)||void 0===e?void 0:e.renderingWeblabs)||void 0===t?void 0:t[this.prefix])||void 0===a?void 0:a.toLowerCase()}}}let ta=()=>new tt(window,"ADPT_SF_TRANSPARENCY_INFO_MANDATORY_FOR_EU_712921"),tn=()=>new tt(window,"ADPT_SF_EXPANDABLE_ADS_716745"),ti=()=>new tt(window,"ADPT_SF_ILM_EWC_764130"),to=(e,t,a,n,i,o)=>{var r;try{let s=tl(e,o),l=td(e,o)||s,d=tc(e,o);if(null===l||null===s||null===d){j("Unable to find wrapper, placement, or safe frame iframe",Error("resizeSafeFrameAd error"));return}let c=eu(a),u=eu(t),h=!u&&!c,p=parseInt(t,10),w=u?d.offsetWidth:p,f=c?d.offsetHeight:parseInt(a,10),v=parseInt(n,10),g=e=>{h&&(f=tm({height:f,width:w,targetWidth:e})),w=Math.round(e)},b=0===l.offsetWidth?eb():l.offsetWidth;g(v&&eg()<eb()?v:b);let y=null===(r=null==i?void 0:i.adMap[e])||void 0===r?void 0:r.noInventorySlotSnapshot;y&&(y.adHeight=f,y.adWidth=w);let S=em(w),A=em(h?f:a);d.style.height=A,d.style.width=S;l!==s&&(s.style.height=A,tn().isT1()&&i.adMap[e].options.adFeedbackInfo.boolFeedback&&(l.style.height=em(parseInt(A)+20)),i.sendMessageToAd(e,"resizeCreativeWrapper",{width:S,height:A})),"Detail_hero-quick-promo_Desktop"===o[e].slotId&&(m.incrementPlacementCounter("OffsetLeft",{id:i.adMap[e].options.placementId,name:o[e].slotId},d.offsetLeft),m.incrementPlacementCounter("OffsetTop",{id:i.adMap[e].options.placementId,name:o[e].slotId},d.offsetTop),m.incrementPlacementCounter("OffsetWidth",{id:i.adMap[e].options.placementId,name:o[e].slotId},d.offsetWidth),m.incrementPlacementCounter("OffsetHeight",{id:i.adMap[e].options.placementId,name:o[e].slotId},d.offsetHeight))}catch(t){j("Error resizing ad: "+o[e].slotId,t)}},tr=(e,t,a)=>{let n=td(e,t)||tl(e,t),i=tc(e,t),o=a.resizePlacementWidthThreshold,r=a.resizePlacementStyleAboveThreshold,s=a.resizePlacementStyleBelowThreshold;if(o=parseInt(o,10),n&&i&&o&&r&&s)n.offsetWidth<o?te(i,s):te(i,r);else{j("Missing arguments in setResizePlacementStyle",Error("setResizePlacementStyle error"));return}},ts=(e,t,a)=>{let n=tc(e,t);n.style.height=em(a),n.style.zIndex="2",n.style.position="relative"},tl=(e,t)=>document.getElementById(t[e].placementDivId),td=(e,t)=>{var a;return(null===(a=t[e])||void 0===a?void 0:a.wrapperDivId)?document.getElementById(t[e].wrapperDivId):null},tc=(e,t)=>document.getElementById(t[e].iframeId),tm=({height:e,width:t,targetWidth:a})=>0===t||isNaN(e)||isNaN(t)||isNaN(a)?0:Math.round(a*e/t),tu="expanded-feedback-label",th="expanded-safeframe",tp="expandable-ads-styles",tw=(e,t)=>{if(null!==document.querySelector(`#${tp}`))return;let a=document.createElement("style");a.id=tp,a.innerHTML=`
        div.${tu} {
            background-color: white;
            z-index: 2;
            height: 30px !important;
            top: 0px !important;
        }
        iframe.${th} {
            display: block;
            padding: 0px !important;
            max-height: none !important;
        }`;let n=tl(e,t);if(null==n){j("Failed to append styles for expandable ads");return}n.appendChild(a)},tf=(e,t)=>{var a;let n=tc(e,t),i=null==n?void 0:n.nextSibling;if(null===i||null===n){j(`feedbackWrapper: ${i?"present":"missing"}, safeFrame: ${n?"present":"missing"}`,Error("Failed to set styles for expandable ads"));return}i.classList.add(tu),null===(a=null==n?void 0:n.classList)||void 0===a||a.add(th)},tv=(e,t)=>{var a;let n=tc(e,t),i=null==n?void 0:n.nextSibling;null!=i&&(i.classList.remove(tu),null===(a=null==n?void 0:n.classList)||void 0===a||a.remove(th))},tg=(e,t)=>{tw(e,t)},tb=e=>e<=600,ty=(e,t)=>{let a=e.staticHeight?parseInt(e.staticHeight,10):0;return a+(eu(e.width)?parseInt(e.height,10):tm({height:parseInt(e.height,10),width:parseInt(e.width,10),targetWidth:t}))},tS=(e,t,a)=>{let n=n=>{t.sendMessageToAd(e.options.arid,"triggerEventInIframe",{eventType:n.type}),a(e)};window.addEventListener("scroll",n,{once:!0}),window.addEventListener("click",n,{once:!0}),window.addEventListener("swipe",n,{once:!0}),window.addEventListener("tap",n,{once:!0})},tA=e=>e+"_Feedback";class tE{async addSponsoredLabelWithFeedbackLink(e,t){e.appendChildTo(this.parentHtmlId,this);let a=await t.getSponsoredLabelAndFeedbackLink(this.urlPathAndParameter);if(null==a?void 0:a.isOk())return e.updateElement(this.getHtmlId(),a),a}getHtmlId(){return tA(this.parentHtmlId)}isHidden(){return this.hidden}constructor(e,t,a,n,i,o,r){this.parentHtmlId=e,this.feedbackStyle=t,this.labelText=a,this.labelStyle=n,this.position=i,this.urlPathAndParameter=o,this.hidden=r}}class tI{open(e){e.clickChildLink(this)}getHtmlId(){return tA(this.parentHtmlId)}constructor(e){this.parentHtmlId=e}}class tD{createSponsoredLabelWithFeedbackLink(e,t){t.request(),e.addSponsoredLabelWithFeedbackLink(this.feedbackHtmlPort,this.feedbackApiPort).then(a=>{t.success(a),!e.isHidden()&&t.labelRenderedHost()}).catch(()=>{t.error()})}openModal(e){e.open(this.feedbackHtmlPort)}labelRendered(e){e.labelRenderedCreative()}removeSponsoredLabelAndFeedbackLink(e){let t=document.getElementById(e+"_Feedback");try{t.remove()}catch(e){j("Unable to remove AdFeedback Div",e)}}logTransparencyInfoMissing(e){e.transparencyInfoMissing()}constructor(e,t){this.feedbackHtmlPort=e,this.feedbackApiPort=t}}let tT=(e,t)=>new tM(e,t),tk={REQUEST:"adfeedback_request",SUCCESS:"adfeedback_success",ERROR:"adfeedback_error",LABEL_RENDERED_CREATIVE:"adfeedback_sponsoredlabelrendered_creative",LABEL_RENDERED_HOST:"adfeedback_sponsoredlabelrendered_host"},tC={REQUEST:"adfeedback:request",SUCCESS:"adfeedback:success",ERROR:"adfeedback:error",LABEL_RENDERED_CREATIVE:"adfeedback:sponsoredlabelrendered:creative",LABEL_RENDERED_HOST:"adfeedback:sponsoredlabelrendered:host",LABEL_RENDERED:"adfeedback:sponsoredlabelrendered",TRANSPARENCY_INFO_MISSING:"adfeedback:transparencyinfo:missing"};class tM{request(){var e;m.incrementPlacementCounter(tC.REQUEST,this.placement),m.incrementCounter(tC.REQUEST),U.events().log("adfeedback_request",this.placement.name,this.placement.id),this.logTrace(null===(e=this.tracer)||void 0===e?void 0:e.feedback.feedbackRequest)}success(e){var t;m.incrementPlacementCounter(tC.SUCCESS,this.placement),m.incrementCounter(tC.SUCCESS),U.events().log("adfeedback_success",this.placement.name,this.placement.id),this.logTrace(null===(t=this.tracer)||void 0===t?void 0:t.feedback.feedbackResponse(e))}error(){var e;m.incrementPlacementCounter(tC.ERROR,this.placement),U.events().log("adfeedback_error",this.placement.name,this.placement.id),this.logTrace(null===(e=this.tracer)||void 0===e?void 0:e.feedback.feedbackResponse())}labelRenderedCreative(){m.incrementPlacementCounter(tC.LABEL_RENDERED_CREATIVE,this.placement),m.incrementCounter(tC.LABEL_RENDERED),U.events().log("adfeedback_sponsoredlabelrendered_creative",this.placement.name,this.placement.id)}labelRenderedHost(){var e;m.incrementPlacementCounter(tC.LABEL_RENDERED_HOST,this.placement),m.incrementCounter(tC.LABEL_RENDERED),U.events().log("adfeedback_sponsoredlabelrendered_host",this.placement.name,this.placement.id),this.logTrace(null===(e=this.tracer)||void 0===e?void 0:e.feedback.renderSponsoredLabel)}transparencyInfoMissing(){m.incrementPlacementCounter(tC.TRANSPARENCY_INFO_MISSING,this.placement),m.incrementCounter(tC.TRANSPARENCY_INFO_MISSING)}constructor(e,t){this.placement=e,this.tracer=t,this.logTrace=e=>{var t;e&&(null===(t=this.tracer)||void 0===t||t.instance.logTrace("adFeedBack",e))}}}class tR{isOk(){return"ok"===this.status}constructor(e,t,a){this.status=e,this.html=t,this.script=a}}class tP{async getSponsoredLabelAndFeedbackLink(e){return fetch(this.windowRepo.origin()+e).then(async e=>{if(e.ok){let t=await e.json();return new tR(t.status,t.html,t.script)}return Promise.reject(null)}).catch(()=>Promise.reject(null))}constructor(e){this.windowRepo=e}}class t_{appendChildTo(e,t){var a,n;function i(e){let t=document.createElement("div");return t.setAttribute("id",e.getHtmlId()),a(t,e.feedbackStyle),t.append(function(e){let t=document.createElement("div");return t.innerHTML=e.labelText,a(t,e.labelStyle),t}(e)),t;function a(e,t){for(let a in t)e.style.setProperty(a,t[a])}}1===t.position?null===(a=tL(e))||void 0===a||a.prepend(i(t)):0===t.position&&(null===(n=tL(e))||void 0===n||n.append(i(t)))}updateElement(e,t){let a=tL(e);a&&(a.innerHTML=t.html,function(e,t){let a=function(e){let t=document.createElement("script");return e.prepend(t),t}(e);a.innerHTML=t.script}(a,t))}clickChildLink(e){let t=document.getElementById(e.getHtmlId());if(t){for(let e of t.children)if(function(e){return"A"===e.tagName||"DIV"===e.tagName}(e)){e.click();return}}}}let tL=e=>document.getElementById(e);class tx{get feedbackRequest(){return{adFeedbackRequest:{slot:this.placementName,placementId:this.placementId,endPoint:this.endpoint,feedbackDivStyle:this.feedbackDivStyle,requestUrl:this.endpoint}}}feedbackResponse(e){return{adFeedBackResponse:{feedbackResponseStarted:!0,feedBackResponseReturned:!!e,response:e}}}get renderSponsoredLabel(){return{renderSponsoredLabel:!0}}constructor(e,t,a,n){this.placementName=e,this.placementId=t,this.endpoint=a,this.feedbackDivStyle=n}}let tF={code:"BE",hostname:"www.amazon.com.be",name:"Belgium"},tN={code:"FR",hostname:"www.amazon.fr",name:"France"},tz={code:"DE",hostname:"www.amazon.de",name:"Germany"},tH={code:"IT",hostname:"www.amazon.it",name:"Italy"},tO={code:"NL",hostname:"www.amazon.nl",name:"Netherlands"},tW={code:"PL",hostname:"www.amazon.pl",name:"Poland"},tB={code:"ES",hostname:"www.amazon.es",name:"Spain"},tU={code:"SE",hostname:"www.amazon.se",name:"Sweden"},t$=e=>location.hostname===e.hostname,tj=()=>t$(tF)||t$(tN)||t$(tz)||t$(tH)||t$(tO)||t$(tW)||t$(tB)||t$(tU),tq=e=>!tj()||function(){var t,a,n,i,o,r,s,l,d,c;return!tV(null===(n=null===(a=null===(t=null==e?void 0:e.url)||void 0===t?void 0:t.parameters)||void 0===a?void 0:a.adPlacementMetaData)||void 0===n?void 0:n.slotName)&&(null===(s=null===(r=null===(o=null===(i=null==e?void 0:e.url)||void 0===i?void 0:i.parameters)||void 0===o?void 0:o.adCreativeMetaData)||void 0===r?void 0:r.adCreativeDetails)||void 0===s?void 0:s.length)>0&&(null===(c=null===(d=null===(l=null==e?void 0:e.url)||void 0===l?void 0:l.parameters)||void 0===d?void 0:d.adCreativeMetaData)||void 0===c?void 0:c.adCreativeDetails.every(e=>{var t,a,n,i;return(t=e).version&&!tV(t.advertiserIdNS)&&(null===(a=t.selectionSignals)||void 0===a?void 0:a.context)!==void 0&&(null===(n=t.selectionSignals)||void 0===n?void 0:n.location)!==void 0&&!tV(null===(i=t.selectionSignals)||void 0===i?void 0:i.pastActivity)}))}(),tV=e=>!e||e.length<=0,tJ=()=>new tQ(function(){return new tD(new t_,new tP({origin:()=>window.location.origin}))}());class tQ{addSponsoredLabel({parentHtmlId:e,placement:t,feedback:a,tracer:n}){return tq(a)?(a.hidden&&(Object.assign(a.style,{display:"none"}),Object.assign(a.label.style,{display:"none"})),this.feedbackService.createSponsoredLabelWithFeedbackLink(function(e,t){return new tE(e,t.style,t.label.text,t.label.style,"TOP"===t.position?1:0,tK(t.url.path,encodeURIComponent(JSON.stringify(t.url.parameters))),t.hidden)}(e,a),tT(t,tY(n,t,a))),!0):(this.feedbackService.logTransparencyInfoMissing(tT(t,tY(n,t,a))),j("Transparency Information missing"),!1)}openModal(e){this.feedbackService.openModal(new tI(e))}labelRendered({placement:e}){this.feedbackService.labelRendered(tT(e))}removeSponsoredLabelAndFeedbackLink(e){this.feedbackService.removeSponsoredLabelAndFeedbackLink(e)}constructor(e){this.feedbackService=e}}let tY=(e,t,a)=>e?{instance:e,feedback:new tx(t.name,t.id,tK(a.url.path,encodeURIComponent(JSON.stringify(a.url.parameters))),a.style)}:void 0,tK=(e,t)=>e+"?pl="+t,tX=e=>{tJ().labelRendered({placement:{name:e.options.slot,id:e.options.placementId}})},tG=e=>{tJ().openModal(e.options.adPlacementMetaData.adElementId)},tZ=e=>{tJ().removeSponsoredLabelAndFeedbackLink(e.options.adPlacementMetaData.adElementId)},t0=(e,t)=>tJ().addSponsoredLabel({parentHtmlId:e.adPlacementMetaData.adElementId,placement:{id:e.placementId,name:e.slot},feedback:{position:e.adFeedbackInfo.adFeedbackOnTop?"TOP":"BOTTOM",hidden:!e.adFeedbackInfo.boolFeedback,style:e.feedbackDivStyle,url:{path:e.adFeedbackInfo.endPoint,parameters:{adPlacementMetaData:e.adPlacementMetaData,adCreativeMetaData:e.adCreativeMetaData}},label:{text:l(e.adFeedbackInfo.sponsoredText),style:e.advertisementStyle}},tracer:t}),t1={},t2=null,t3=(e,t,a)=>{let n=(e,t)=>{var a,n;return null!==(n=null===(a=document.getElementById(e))||void 0===a?void 0:a.getAttribute(t))&&void 0!==n?n:null},i=n("ilmRelocatedHtml","data-relocated-html");if(i){e.sendMessageToAd(t,"sendRelocatedHtmlContentEncodedToAd",i);return}document.addEventListener("sendRelocatedHtmlContentEncodedToAd",i=>{let o=n("ilmRelocatedHtml","data-relocated-html");o?e.sendMessageToAd(t,"sendRelocatedHtmlContentEncodedToAd",o):a()},{once:!0})},t5=e=>{let t=document.getElementById(e);void 0!==t&&t&&(t.style.display="none")};class t7{constructor(t,n){this.hms=t,this.hc=n,this.changeSize=(e,t)=>{let a=e.options.allowedSizes;if(void 0===e.options.allowChangeSize||!!e.options.allowChangeSize)if(t9(t,a,t6)){e.iframe.style.height=t.height,e.iframe.style.width=t.width;let a=td(e.options.arid,this.hc.AD_IDS);e.slot.style.height=a?t.height:"auto",e.slot.style.width=a?t.width:"auto";let n=this.hc.ADS_HANDLERS[e.options.arid];t8(e),n.defaultResizeSafeFrameHandler&&window.removeEventListener("resize",n.defaultResizeSafeFrameHandler)}else{let e="Size is not allowlisted: "+t.width+" x "+t.height;j(e)}},this.sendAdBarTrace=(e,t)=>{e.options.arid in this.hc.AD_TRACERS&&this.hc.AD_TRACERS[e.options.arid].logTrace(t.field,t.traceInfo)},this.startPixelTracking=async(e,t)=>{await eG(this.hms,this.hc,e,t)},this.logAPIInvocation=(e,t)=>{let a=`messenger:${t.apiName}`;m.incrementCounter(a),m.incrementPlacementCounter(a,{id:e.options.placementId,name:e.options.slot}),e.options.arid in this.hc.AD_TRACERS&&this.hc.AD_TRACERS[e.options.arid].logTrace("apiCalls",t)},this.resizeSafeFrameAd=async e=>{window.addEventListener("resize",this.hc.ADS_HANDLERS[e.options.arid].defaultResizeSafeFrameHandler),to(e.options.arid,e.options.size.width,e.options.size.height,e.options.maxAdWidth,this.hms,this.hc.AD_IDS)},this.setResizePlacementStyle=async e=>{window.addEventListener("resize",this.hc.ADS_HANDLERS[e.options.arid].defaultSetResizePlacementStyle),tr(e.options.arid,this.hc.AD_IDS,e.options.resizePlacementStyle)},this.logError=(e,t)=>{j(t.message+": "+e.options.slot,t.error)},this.logCsaEvent=(e,t)=>{Z(t.metricName,e.options.slot,e.options.placementId)},this.addCsaEntity=(e,t)=>{ee(t)},this.sendLatencyMetric=(e,t)=>t4(e,t),this.customMessage=(e,t)=>{this.hms.customMessage(t.key,t.body,e.options.allowlistedCustomMessageEvents,e.options.slot,e.options.placementId)},this.fireViewableLatencyMetrics=async(e,t)=>{eX(e.options.arid,e.options.slot,e.options.placementId,t.adLoadedTimestamp)},this.countMetric=(e,t)=>{t.isGlobal?m.incrementCounter(t.metricMsg,t.value):m.incrementPlacementCounter(t.metricMsg,{id:e.options.placementId,name:e.options.slot},t.value)},this.addCsmTag=(e,t)=>{t.isGlobal?m.addCsmTag(t.tag,null,null,t.msg):m.addCsmTag(t.tag,e.options.slot,e.options.placementId,t.msg)},this.requestVideoAutoplay=async(e,t)=>{!function(e,t,n){let i=t=>{n.sendCustomMessageToAd(e.options.arid,"videoAutoplayResponse",t)};if(e.options.expParams&&e.options.expParams.noVideoAutoplay)i(!1);else if(function(e){return e&&"gateway"===e.toLowerCase()}(e.options.pageType)){var o,r,s;o=e.iframe,r=i,s=t,o&&o.id&&!t1[o.id]&&window.P&&a()&&window.P.when("gw-video-orchestrator").execute(e=>{e.subscribe(o,r,s),t1[o.id]=!0})}else t2===e.options.arid?i(!0):null===t2&&function(e){let t=document.getElementsByTagName("video");for(let a=0;a<t.length;++a)if(!t[a].paused&&eP(e,t[a]))return!1;return!0}(e.iframe)?(t2=e.options.arid,i(!0)):i(!1)}(e,t,this.hms)},this.releaseVideoAutoplay=async()=>{a()&&window.P&&window.P.when("gw-video-orchestrator").execute(e=>{e.elect()}),t2=null},this.haveVideoAutoplayPermission=async e=>{var t,n;(n=(t=e).iframe)&&window.P&&a()&&window.P.when("gw-video-orchestrator").execute(e=>{e.elect(n)}),t2=t.options.arid},this.feedbackLabelRendered=e=>{tX(e)},this.feedbackOpenModal=e=>{tG(e)},this.handleFallbackExperience=e=>{tZ(e)},this.expandAdSlot=(e,t)=>{let a=e.iframe,n=ty(t,a.offsetWidth),i=eu(t.width)?t.width:a.offsetWidth;if(!tb(n)){j(`Ad expansion blocked, requested dimensions: ${t}, ad info: ${e.options.adCreativeMetaData}`,Error("ad expansion blocked"));return}tg(e.options.arid,this.hc.AD_IDS),to(e.options.arid,em(i),em(n),e.options.maxAdWidth,this.hms,this.hc.AD_IDS),tS(e,this.hms,this.resetSlotSize)},this.expandAdSlotWithOverlap=(e,t)=>{let a=e.iframe,n=ty(t,a.offsetWidth);if(!tb(n)){j(`Ad expansion blocked, requested dimensions: ${t}, ad info: ${e.options.adCreativeMetaData}`,Error("ad expansion blocked"));return}tg(e.options.arid,this.hc.AD_IDS),ts(e.options.arid,this.hc.AD_IDS,em(n)),tf(e.options.arid,this.hc.AD_IDS),tS(e,this.hms,this.resetSlotSize)},this.resetSlotSize=e=>{this.hc.ADS_HANDLERS[e.options.arid].defaultResizeSafeFrameHandler(),tv(e.options.arid,this.hc.AD_IDS)},this.triggerEventInIframe=(e,t)=>{this.hms.sendMessageToAd(e.options.arid,"triggerEventInIframe",{eventType:t.event.type})},this.registerCODFallback=(t,a)=>{e(eO)("localStorage")&&el("SF",t.options.arid,a)},this.clearCODFallback=t=>{e(eO)("localStorage")&&ec("SF",t.options.arid)},this.safeFrameReady=e=>{var t;(null===(t=e.options.expParams)||void 0===t?void 0:t.ilmRelocatedHtmlIsActive)&&!e.options.htmlContentEncoded&&t3(this.hms,e.options.arid,()=>{t5(this.hc.AD_IDS[e.options.arid].placementDivId)})},this.saveAdDetailsForAdReporter=(e,t)=>{if(!window.adReporterConfig)return;!window.adReporterDetails&&(window.adReporterDetails={});let a=e.options.slotName;t&&a===t.slotName?window.adReporterDetails[a]=t:!window.adReporterDetails[a]&&(window.adReporterDetails[a]=e)}}}let t4=(e,{latencyMetricType:t,timestamp:a})=>{let n={latencyMetricType:t,placementName:e.options.slot,placementId:e.options.placementId,timestamp:a};ea().sendLatencyMetric(n)},t6=(e,t)=>e.height===t.height&&e.width===t.width,t9=(e,t,a)=>{if(t&&"object"==typeof t){for(let n=0,i=t.length;n<i;n++)if(a(e,t[n]))return!0}return!1},t8=e=>{e.slot.style.overflow=""};class ae extends t7{constructor(e,t){super(e,t),this.collapseSlot=async e=>{var t;t5(this.hc.AD_IDS[e.options.arid].placementDivId),t5(this.hc.AD_IDS[e.options.arid].auiCardDeckId),"nav-sitewide-msg"===e.options.slotName&&(await eQ("amznJQ.available:navbarJSLoaded",e.slot),"function"==typeof(null===(t=null==parent?void 0:parent.navbar)||void 0===t?void 0:t.unHideSWM)&&parent.navbar.unHideSWM())}}}new RegExp(/((&#\d{2,4};)|(&[a-z]{2};)|(&[a-z]{3,7};)|(%[a-fA-F0-9]{2})|(\W))pd_rd_plhdr(=|%3D)t((&#\d{2,4};)|(&[a-z]{2,7};)|(%[a-fA-F0-9]{2})|(\W))/);var at="data-val",aa=function(e){if(""===e)return"";var t=document.getElementById("ape_"+e+"_placement_ClickTracking");if(!t||!t.hasAttribute(at))return"";var a=t.getAttribute(at);return a?a:""};let an=e=>{if(!("pageType"in e)||!("subPageType"in e)||!("slotName"in e))return"";try{var t,a,n;return t=e.pageType,a=e.subPageType,n=e.slotName,aa([t,n,a].join("_"))}catch(e){return""}},ai="unknown",ao=e=>{var t,a,n;return{mobileConnectionType:(null===(a=null===(t=null==e?void 0:e.userContext)||void 0===t?void 0:t.mobileConnectionType)||void 0===a?void 0:a.toString())||"0",connectionType:(e=>{if(e)return e.toLowerCase();let t=window.navigator,a=(null==t?void 0:t.connection)||(null==t?void 0:t.mozConnection)||(null==t?void 0:t.webkitConnection);return(null==a?void 0:a.type)||(null==a?void 0:a.effectiveType)||ai})(null===(n=null==e?void 0:e.userContext)||void 0===n?void 0:n.connectionType)}},ar=e=>{let t=/^([.\d]*\s*)({.*})$/.exec(e),a=t[1],n=JSON.parse(t[2]),i={};return i.os=n.os,i.av=n.av,a+JSON.stringify(i)},as=e=>{let t="";for(let a of e){let e=al(a);""!==e&&("amzn-app-ctxt"===a&&(e=ar(e)),t+=a+"="+e+"; ")}return t},al=e=>{var t;let a=e+"=",n=decodeURIComponent(document.cookie),i=null===(t=n.split("; ").find(e=>e.startsWith(a)))||void 0===t?void 0:t.split("=")[1];return i||""},ad=["d3l3lkinz3f56t.cloudfront.net","g-ecx.images-amazon.com","z-ecx.images-amazon.com","images-na.ssl-images-amazon.com","g-ec4.images-amazon.com","images-cn.ssl-images-amazon.com"],ac=e=>{let t="";return e&&(t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]),0!==t.length},am=e=>{e.fallbackStaticAdClickUrl&&!ac(e.fallbackStaticAdClickUrl)&&(e.fallbackStaticAdClickUrl=window.location.protocol+"//"+window.location.host+e.fallbackStaticAdClickUrl)},au="adload:start",ah={1:"abpstatus:enabled",0:"abpstatus:notenabled","-1":"abpstatus:unknown"},ap=new Map([["1","abpstatus_enabled"],["0","abpstatus_notenabled"],["-1","abpstatus_unknown"]]);class aw{collapse(){this.div.style.display="none"}constructor(e,t,a){this.id=e,this.name=t,this.div=a}}let af=(e,t)=>new aw(t.placementId,t.slot,e),av="div#ape_Detail_desktop-detail-ilm_desktop_placement",ag="nav-ewc-persistent-hover",ab=e=>{"desktop-detail-ilm"===e.slotName&&ti().isT1()&&aA()},ay=()=>null!==document.querySelector(`.${ag}`),aS=e=>"attributes"===e.type&&"class"===e.attributeName&&e.target.classList.contains(ag),aA=()=>{if(ay()){aE(av);return}let e=new MutationObserver((e,t)=>{if(e.some(aS))try{aE(av),t.disconnect()}catch(e){j("Failed to resize ILM for EWC.",e)}});e.observe(window.document.documentElement,{attributes:!0,attributeFilter:["class"]})},aE=e=>{let t=document.querySelector("div#nav-flyout-ewc"),a=document.querySelector(e);if(null===a||null===t){j(`could not find placementDiv (value was: ${a}) or ewc (value was: ${t})`);return}let n=t.offsetWidth;aI(a,n)},aI=(e,t)=>{var a;let n=document.createElement("style");n.innerHTML=`@media screen and (min-width: 1500px) { div[id$=${e.id}] {
        width: calc(100vw - ${t}px) !important; 
        margin-left: calc(-50vw + 50% + ${t/2}px) !important;
        margin-right: calc(-50vw + 50% + ${t/2}px) !important;
    `,null===(a=null==document?void 0:document.body)||void 0===a||a.appendChild(n)};class aD{start(){let e=()=>{this.sendTrace(),window.setInterval(this.sendTrace,3e3)};"loading"!==document.readyState?e():window.addEventListener("load",e)}logTrace(e,t){if(this.traceId){let a;let n=new Date().getTime();!Object.prototype.hasOwnProperty.call(this.storedTrace,e)&&(this.storedTrace[e]=[]);let i=t===Object(t);(a=i?Object.assign({},t):JSON.parse('{ "'+e+'":"'+t+'"}')).timeStamp=n,a.timeSinceAdStart=n-this.adStartTime,this.storedTrace[e].push(a)}}async sendTrace(){if(!(e=>{for(let t in e)if(Object.prototype.hasOwnProperty.call(this.storedTrace,t))return!1;return!0})(this.storedTrace)){let e="/gp/adbarplus?traceId="+this.traceId+"&systemName=browser",t=await fetch(e,{method:"POST",body:JSON.stringify(this.storedTrace),headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(t.ok)for(let e in this.storedTrace)Object.prototype.hasOwnProperty.call(this.storedTrace,e)&&delete this.storedTrace[e];else console.error("failed to send request to /gp/adbarplus",t)}}constructor(e,t=0,a={}){this.traceId=e,this.adStartTime=t,this.storedTrace=a}}let aT=(e,t)=>{let{slotName:a,traceId:n,arid:i,hostDomain:o,allowedSizes:r,allowedDomains:s,queryParams:l,aPageStart:d,safeFrameSrc:c,abpStatus:m,loadAfter:u}=t,h=window[a],p=new aD(n,h&&h.adStartTime||0);e.AD_TRACERS[i]=p,e.AD_TRACERS[i].logTrace("safeFrameInput",t);let w={caches:window.caches,plugins:document.plugins,cookies:document.cookie,userAgents:navigator.userAgent};e.AD_TRACERS[i].logTrace("browserData",w);e.AD_TRACERS[i].logTrace("additionalInitilizationParams",{hostDomain:o,allowedSizes:r,allowedDomains:s,queryParams:l,aPageStart:d,adStartTime:h,safeFrameSrc:c,abpStatus:m,loadAfter:u}),p.start()},ak=(e,t,a)=>async()=>{to(a.arid,a.size.width,a.size.height,a.maxAdWidth,e,t.AD_IDS)},aC=(e,t)=>async()=>{tr(t.arid,e.AD_IDS,t.resizePlacementStyle)},aM="data-arid",aR=CSS.escape("text/x-dacx-safeframe");class aP{constructor(e,t,a,n,i){this.btr=e,this.hc=t,this.hms=a,this.hmr=n,this.supportedCommands=i,this.initAllSafeFrames=async()=>{if(this.getWindowSafeFrame()){await this.getWindowSafeFrame().loadAds();return}G(),this.initWindowSafeFrame({registerCustomMessageListener:this.hms.registerCustomMessageListener,sendCustomMessage:this.hms.sendCustomMessage,loadAds:this.loadAds,loadAd:this.loadAd}),e9(),await this.loadAds(),window.addEventListener("resize",()=>{this.getWindowSafeFrame()&&this.getWindowSafeFrame().sendCustomMessage("resize",{height:window.innerHeight,width:window.innerWidth})})},this.loadAd=async e=>{let t=[],a=this.hc;try{let n=aL(this.hms,e),i=e.getAttribute(aM);if(i)return[];let o=this.getSafeFramePath(n),r=ax(n,o);aT(a,r),e.setAttribute(aM,r.arid),aN(this.hc,this.hms,r),this.initializeAdIds(a,r.arid,r.slot);let s=af(e,n);if(r.forcePunt)return m.addCsmTag("forcePunt",r.slot,r.placementId),ee({forcePunt:"true"}),s.collapse(),t;aF(r),aJ(r),await eQ(r.loadAfter,e),aO(s,a,r,this.hmr,this.hms)}catch(t){j(`Error parsing tag ${e.id}`,t)}return t},this.loadAds=async()=>{let e=[],t=document.querySelectorAll(`div .${aR}`);for(let a of t)e.push(this.loadAd(a));await Promise.all(e)}}}let a_=e=>{let t=window[e]&&"object"==typeof window[e].adDetails?window[e].adDetails:null;return t},aL=(e,t)=>{let a=t.getAttribute("data-csa-c-slot-id"),n=a_(a),i=n||JSON.parse(t.getAttribute("data-ad-details"));am(i);let o="ape_"+i.slot+"_iframe",r=aB(o);if(!r){let a="ape_"+i.slot+"_placement",n=document.getElementById(a),o=!e.adMap[i.arid]&&(null==n?void 0:n.innerHTML);if(o){n.innerHTML="",t.removeAttribute(aM);let e="ape_"+i.slot+"_text-wrapper";document.getElementById(e)&&document.getElementById(e).remove()}}return i},ax=(e,t)=>{var n,i;let o=Object.assign({},e),r=o.slot;o.weblabTreatments=null==window?void 0:window.renderingWeblabs,o.arid=o.arid||Math.random().toString(16).slice(2),o.hostDomain=location.protocol+"//"+location.host,o.userAgent=null===(n=null==window?void 0:window.top)||void 0===n?void 0:n.navigator.userAgent,o.allowedSizes="object"==typeof o.allowedSizes&&o.allowedSizes.length>=0?o.allowedSizes.concat(o.size):[o.size],o.isAUIAvailable=a(),o.cookie=as(o.allowedCookies?o.allowedCookies:[]),o.aPageStart=window.aPageStart,o.adStartTime=(null===(i=window[o.slotName])||void 0===i?void 0:i.adStartTime)||0,o.allowedDomains="object"==typeof o.allowedDomains&&o.allowedDomains.length>=0?o.allowedDomains.concat(ad):ad,o.allowlistedQueryParamKeys&&(o.queryParams=aV(window.location.search,o.allowlistedQueryParamKeys));let s=document.getElementById("ape_"+r+"_userData"),l=null==s?void 0:s.getAttribute("data-user-data");try{let e=l?JSON.parse(l):{};o.userConnectionInfo=ao(e)}catch(e){o.userConnectionInfo={mobileConnectionType:"0",connectionType:ai}}return"clickTracking"in o&&""===o.clickTracking&&(o.clickTracking=an(o)),o.safeFrameSrc=t,o.collectSafeframeRTD=window.collectSafeframeRTD,o},aF=e=>{ea().sendLatencyMetric({latencyMetricType:ej,placementId:e.placementId,placementName:e.slot}),ea().sendLatencyMetric({latencyMetricType:e$,placementId:e.placementId,placementName:e.slot}),m.incrementPlacementCounter(au,{id:e.placementId,name:e.slot}),m.incrementCounter(au),Z("adload_start",e.slot,e.placementId)},aN=(e,t,a)=>{e.ADS_HANDLERS[a.arid]=e.ADS_HANDLERS[a.arid]||{},e.ADS_HANDLERS[a.arid].defaultResizeSafeFrameHandler=ak(t,e,a),e.ADS_HANDLERS[a.arid].defaultSetResizePlacementStyle=aC(e,a)},az=(e,t)=>{var a;return null===(a=e.adMap[t.arid])||void 0===a?void 0:a.iframe},aH=(e,t)=>{let a=document.getElementById(e),n=null==a?void 0:a.getAttribute(aM);return n===t.arid},aO=(e,t,a,n,i)=>{m.incrementPlacementCounter("adload:delayloadcallback",{id:a.placementId,name:a.slot}),Z("adload_delayload",a.slot,a.placementId);let o=t.AD_IDS[a.arid].wrapperDivId,r=o||t.AD_IDS[a.arid].placementDivId;if(aH(r,a)&&(aq(i,a,t),t.adMap[a.arid].channel.port1.onmessage=n.receiveMessage,az(t,a)&&!t0(a,t.AD_TRACERS[a.arid])&&ta().isT1())){e.collapse();return}aW(t,a,i)},aW=(e,t,a)=>{ab(t)},aB=e=>document.getElementById(e),aU=(e,t)=>{let a=e.AD_IDS[t].wrapperDivId,n=e.AD_IDS[t].placementDivId,i=a||n;return document.getElementById(i)},a$=(e,t)=>{let a=aU(e,t);return(null==a?void 0:a.getAttribute("data-iframe-ready"))==="true"},aj=(e,t,a,n)=>{n.contentWindow.postMessage(a.adMap[t.arid].channel.port2,"*",[a.adMap[t.arid].channel.port2]),e.sendMessageToAd(t.arid,"adDetails",t)},aq=(e,t,a)=>{try{let n=document.getElementById(a.AD_IDS[t.arid].placementDivId),i=a.AD_IDS[t.arid].iframeId,o=aB(i),r=o||ef(t,i,t.safeFrameSrc);a.adMap[t.arid]={slot:n,iframe:r,options:t,channel:new MessageChannel},a$(a,t.arid)?aj(e,t,a,r):r.addEventListener("load",()=>{aj(e,t,a,r)},{once:!0}),!o&&n.appendChild(r),ea().sendLatencyMetric({latencyMetricType:eq,placementId:t.placementId,placementName:t.slot}),g("adload:iframecreated",{id:t.placementId,name:t.slot}),Z("adload_iframecreated",t.slot,t.placementId)}catch(e){j(`Error creating safeFrame ${t.slotName}`,e)}},aV=(e,t)=>{let a=new URLSearchParams(e);return[...a.entries()].reduce((e,[a,n])=>(t.includes(a)&&(e[a]=n),e),{})},aJ=e=>{if(e.abpStatus)for(let t in m.addCsmTag("ABPStatus"+s[e.abpStatus],e.slot),ee({ABPStatus:s[e.abpStatus]}),s)m.incrementPlacementCounter(ah[t],{id:e.placementId,name:e.slot},e.abpStatus===t?1:0),e.abpStatus===t&&Z(ap.get(t),e.slot,e.placementId)},aQ=()=>{let e=window.location.hostname.split(".").pop(),t="na";return/^(com|ca|mx|br)$/.test(e)?t="na":/^(uk|de|fr|it|es|in|ae|sa|nl|tr|se|pl|eg|be)$/.test(e)?t="eu":/^(jp|au|sg)$/.test(e)?t="fe":/^(cn)$/.test(e)&&(t="cn"),"https://images-"+t+".ssl-images-amazon.com"},aY="custommessage:notallowlisted";class aK{constructor(e,t={}){this.adMap=e,this.msgListeners=t,this.sendMessageToAd=(e,t,a)=>{let n=this.adMap[e].channel.port1;n.postMessage({command:t,data:a})},this.customMessage=(e,t,a,n,i)=>{let o=this.msgListeners;try{"undefined"!==a&&Array.isArray(a)&&(a.indexOf(e)>-1&&o[e]?(m.incrementCounter(`custommessage:allowlisted:${e}`),o[e](t)):-1===a.indexOf(e)?(m.incrementCounter(aY),m.incrementPlacementCounter(aY,{id:i,name:n})):j("Unrecognized custom message key: "+e))}catch(e){j("Custom Message Error",e)}},this.registerCustomMessageListener=(e,t,a)=>{let n=!1,i=this.msgListeners;try{if(!i[e]||"function"!=typeof i[e]||a)i[e]=t,n=!0;else{let t=Error("Custom message listener already exists for key: "+e);j("Duplicate Key",t)}}catch(e){j("Error registering custom message listener",e)}return n},this.sendCustomMessage=(e,t)=>{let a=this.adMap,n={key:e,data:t};for(let e in a)this.sendMessageToAd(e,"customMessage",n)},this.sendCustomMessageToAd=(e,t,a)=>{this.sendMessageToAd(e,"customMessage",{key:t,data:a})}}}class aX{constructor(e={},t={},a={},n={}){this.adMap=e,this.ADS_HANDLERS=t,this.AD_IDS=a,this.AD_TRACERS=n}}class aG{constructor(e={},t){this.adMap=e,this.supportedCommands=t,this.receiveMessage=async e=>{let t=e.data,a=this.adMap[t.arid];try{let e=this.supportedCommands,n=e[t.command];n&&await n(a,t.data)}catch(a){let t="Problem with message: "+JSON.stringify(e.data);j(t,a)}}}}let aZ=new class e extends aP{constructor(e){let t=new aX,a=new aK(t.adMap),n=new ae(a,t);super(e,t,a,new aG(t.adMap,n),n),this.initializeAdIds=(e,t,a)=>{e.AD_IDS[t]={slotId:a,placementDivId:"ape_"+a+"_placement",iframeId:"ape_"+a+"_iframe",auiCardDeckId:"ape_"+a+"_aui_cardDeck"}},this.getSafeFramePath=e=>{let t;let a=aQ(),n=e.abpAcceptable&&("1"===e.abpStatus||"-1"===e.abpStatus);if(r(e.mediaType,e.adCreativeMetaData.adProgramId)){let e=a+this.btr.safeFrameVideoPath,i=a+this.btr.allowlistedSafeFrameVideoPath;t=n?i:e}else{let e=a+this.btr.safeFramePath,i=a+this.btr.allowlistedSafeFramePath;t=n?i:e}return t},this.initWindowSafeFrame=e=>{window.DAsf=e},this.getWindowSafeFrame=()=>window.DAsf}}({safeFrameVideoPath:"/images/S/apesafeframe/ape/sf/desktop/sfVideo-1.50.fee3256f.html",allowlistedSafeFrameVideoPath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sfVideo-1.50.fee3256f.html",safeFramePath:"/images/S/apesafeframe/ape/sf/desktop/sf-1.50.69052dba.html",allowlistedSafeFramePath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sf-1.50.69052dba.html"});n(()=>aZ.initAllSafeFrames(),j,"Error initializing safeFrame")()})();
//# sourceMappingURL=DAsf-1.50.d201d2cb.js.map
