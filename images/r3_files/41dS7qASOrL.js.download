'use strict';mix_d("SimilaritiesUICards__p13n-desktop-sims-fbt:p13n-desktop-sims-fbt__aLghWzkg","exports tslib @p/A @c/metrics @c/browser-operations @c/scoped-dom @c/aui-untrusted-ajax @c/error-handling @c/logger".split(" "),function(V,x,ka,W,la,ma,na,oa,pa){function B(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var r=B(ka),X=B(la),h=B(ma),Y=B(na),K=B(oa),L=B(pa),Z={},M=function(a,e,d){void 0===e&&(e="");void 0===d&&(d=1);e=a+e;Z.hasOwnProperty(e)||(Z[e]=!0,W.count(a,(W.count(a)||
0)+d))},qa=function(a){M(r["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var e=function(b,c){b={$event:{preventDefault:r["default"].$.noop,stopPropagation:r["default"].$.noop},$target:b.getContent().find('[data-a-tab-name="'+c+'"]'),data:{name:"energyEfficiencyTabSet"}};r["default"].trigger("a:declarative:a-tabs:click",b)},d=function(b,c){var g=b&&b.$event,f=b&&b.data||{},k=f.activeTabName,u=f.modalHeight,y=f.name;g&&g.preventDefault&&g.preventDefault();
g&&g.stopPropagation&&g.stopPropagation();g=c.get(y);g||(r["default"].on("a:popover:beforeShow:"+y,function(l){l.popover&&l.popover.getContent&&(l=l.popover.getContent(),l.find(".a-manually-loaded").parent().css("min-height",u),r["default"].loadDescendantImagesManually(l))}),g=c.create(b.$target,f));g.show();e(g,k)};a.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(b){r["default"].declarative("card-energy-efficiency-secondary-view","click",function(c){M("Card:EERU:SharedLib:mobile:click",
c&&c.data&&c.data.name||"");d(c,b)})});a.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(b){r["default"].declarative("card-energy-efficiency-modal","click",function(c){M("Card:EERU:SharedLib:desktop:click",c&&c.data&&c.data.name||"");d(c,b)})})},ra=function(a){a.when("ready").execute("EEBadgeProductFicheResize",function(e){var d=r["default"].$;d(".energyEfficiencyContainer").each(function(b,c){b=d(c).find(".energyEfficiencyProductFicheLabel").first();c=d(c).find("svg").first();
b.parent().outerHeight()>c.outerHeight()&&(b.removeClass("a-size-small"),b.addClass("a-size-micro"),b.parent().outerHeight()>c.outerHeight()&&b.parent().css("line-height","10px"))})})},sa=function(){var a=window.P;qa(a);ra(a)},ta={ctiList:["Website/Personalization/Report a Problem CX"],category:"Website",type:"Personalization",item:"Report a Problem CX",folder:"9c9c97c9-6f69-4dba-a55d-26045c6a3068",group:"P13N Report a Problem CX"},ua=[{ctiList:["Website/Personalization/Similarities","Website/Detail Page/Similarities"],
category:"Website",type:"Personalization",item:"Similarities",folder:"4d16d05d-9a17-4b36-b8fe-9ee159ff81de",group:"Similarities"}],ya=function(a){var e=h["default"].cardRoot.querySelector(".p13n-report-flag"),d=X["default"].setup();d.define("showFlag","mouseover",function(){e.classList.remove("p13n-report-flag-hide")});d.define("hideFlag","mouseout",function(){e.classList.add("p13n-report-flag-hide")});d.attach("showFlag",a);d.attach("hideFlag",a);var b=h["default"].cardRoot.querySelector(".internal-flag-form"),
c=b.querySelector(".internal-flag-env-data").dataset,g=b.querySelector(".internal-flag-title-text"),f=b.querySelector(".internal-flag-description").firstElementChild,k=b.querySelector(".internal-flag-alias"),u=b.querySelector(".internal-flag-response-message"),y=function(l){l.preventDefault();l=function(m){return!m||!m.trim()};if(l(g.value)||l(f.value)||l(k.value))return N(u,!1,"Something went wrong. One of the required fields was missing."),!1;l=h["default"].cardRoot.querySelectorAll(".a-dynamic-image");
var v;if(v=h["default"].cardRoot.querySelector(".a-carousel-heading")){var t=va(a,l.length);v="Internal user reported issue '"+g.value+"' with widget: "+v.innerText}else t=wa(a),v="Internal user reported issue '"+g.value+"'";l=xa(l,t,f.value,k.value,c);var n=ta;ua.forEach(function(m){m.ctiList.includes(c.cti)&&(n=m)});Y["default"].post("https://p13ngoals.corp.amazon.com/sims",{accepts:"text/html, application/json",contentType:"application/json;charset=UTF-8"},{sim_params:{assigned_folder:n.folder,
description:l,descriptionContentType:"text/amz-markdown-sim",extensions:{tt:{assignedGroup:n.group,category:n.category,impact:5,item:n.item,type:n.type}},tags:[{id:"internal-problem-generated"}],title:v}}).then(function(m){N(u,!0,m)}).catch(function(m){N(u,!1,m)});return!1};b.onsubmit=function(l){return y(l)};d=h["default"].cardRoot.querySelector(".p13n-desktop-report-problem-flag-data");if(d.dataset.name)r["default"].on("a:popover:hide:"+d.dataset.name,function(){b.reset();u.innerText=""})},va=function(a,
e){if(!a.dataset.aCarouselOptions)return L["default"].log("Empty ASIN List in carouselElement.dataset.aCarouselOptions","ERROR"),[];a=JSON.parse(a.dataset.aCarouselOptions).ajax.id_list;var d=h["default"].cardRoot.querySelector(".a-carousel-firstvisibleitem");d=(Number(d.value)||1)-1;return a.map(function(b){return JSON.parse(b).id}).slice(d,d+e)},wa=function(a){return(a=a.dataset.asinList)?a.split(","):[]},xa=function(a,e,d,b,c){for(var g="",f=0;f<a.length;f++){var k=a[f];g+=(k?"![]("+k.src+")":
"IMAGE MISSING")+"\nASIN: "+(e[f]?e[f]:"ASIN MISSING")+"\n\n"}return"**This SIM-T ticket is created by the 'Report a Problem' internal tool. To know more, here's its wiki: https://w.amazon.com/bin/view/Personalization/CoreRecommendations/Projects/Canaries/Report-a-Problem-UX-on-P13NWidget/UserGuide/**\n\n**Alias:** ["+(b+"](https://phonetool.amazon.com/users/"+b+")\n**Comment:** "+d+"\n\n**Widget Group ID:** "+c.widgetGroupId+"\n**Strategy ID:** "+c.strategyId+"\n**CTI:** "+c.cti+"\n**Facets:** ")+
(c.facets+"\n**Content Reftag:** "+c.reftag+"\n"+(""!==c.baseAsin?"**Page ASIN:** "+c.baseAsin+"\n":"")+"\n**SessionID:** ")+(c.sessionId+"\n**MarketplaceID:** "+c.marketplaceId+"\n**Device Type:** "+c.deviceType+"\n\n**List of ASINs:**\n\n")+g},N=function(a,e,d){e?(a.classList.remove("a-color-error"),d.responseBody&&"object"===typeof d.responseBody?d.responseBody.response&&d.responseBody.response.id?a.innerHTML="Success, here's the <a href=\"https://t.corp.amazon.com/"+d.responseBody.response.id+
'" target="_blank">SIM-T ticket</a> you created.':(L["default"].log("Fail to find the id of the SIM-T ticket created in the response body of response data.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket."):(L["default"].log("The response body of response data is not an object.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket.")):(a.classList.add("a-color-error"),a.innerText="string"===typeof d?d:"Oops! Something went wrong. Please try again.")},
za={setupModal:function(a){return x.__awaiter(void 0,void 0,void 0,function(){var e;return x.__generator(this,function(d){e=h["default"].cardRoot.querySelector(".p13n-report-problem-modal-root");if(!e)return[2];ya(a);return[2]})})}},Aa=function(a,e){e?a.classList.add("add-to-cart-item-disabled"):a.classList.remove("add-to-cart-item-disabled");a.querySelectorAll("input").forEach(function(d){e?d.setAttribute("disabled","true"):d.removeAttribute("disabled")})},aa=function(a,e){a=h["default"].cardRoot.querySelector("#add-to-cart-item-"+
a);if(!a)return K["default"].error('Missing Add to Cart item!", "add-to-cart.client.item-state-handler',"changeItemStatus");if(!(e&&a.classList.contains("add-to-cart-item-disabled")||!e&&!a.classList.contains("add-to-cart-item-disabled"))){Aa(a,e);var d;for(a=e=0;3>a;a++){var b=h["default"].cardRoot.querySelector("#add-to-cart-item-"+a);if(!b)break;b.classList.contains("add-to-cart-item-disabled")||e++}var c=h["default"].cardRoot.getElementsByClassName("add-to-cart-section")[0];a=c.getElementsByClassName("a-button-text")[0];
b=c.getElementsByClassName("add-to-cart-button")[0];c=c.getElementsByClassName("add-to-cart-string-data")[0];if(null===(d=null===c||void 0===c?void 0:c.dataset)||void 0===d?0:d.displayStringList)var g=JSON.parse(c.dataset.displayStringList);b&&(0===e?b.classList.add("a-button-disabled"):b.classList.remove("a-button-disabled"));a?g&&g.length>e?a.innerText=g[e]:K["default"].error('Missing Add to Cart string!", "add-to-cart.client.item-state-handler',"updateButtonString"):K["default"].error('Missing Add to Cart button!", "add-to-cart.client.item-state-handler',
"updateButtonString")}},Ba={accepts:"text/html, application/json",timeout:2E3},ja=function(a){return x.__awaiter(void 0,void 0,void 0,function(){var e,d,b,c,g,f,k,u,y,l,v,t,n,m,z,C,O,D,ba,G,w,E,H,P,Q,R,S,ca;return x.__generator(this,function(T){if((b=h["default"].cardRoot.getElementsByClassName("cardRoot")[0])&&"true"===b.dataset.punt)return[2];c=1;b&&b.dataset.count&&(c=Number(b.dataset.count));b&&b.dataset.components&&(g=JSON.parse(b.dataset.components));b&&b.dataset.priceTotals&&(f=JSON.parse(b.dataset.priceTotals));
b&&b.dataset.pointsTotal&&(k=JSON.parse(b.dataset.pointsTotal));if(g&&f){T=g;for(var da=c,ea=[],fa=[],p=0;p<da;p++){var A=p+1;1<A&&(ea[p]=h["default"].cardRoot.getElementsByClassName("thumbnailPlus-"+String(A))[0]);fa[p]=h["default"].cardRoot.getElementsByClassName("thumbnail-"+String(A))[0]}var U=!1,ha=0,ia="";for(p=0;p<da;p++){A=String(p+1);var F=ea[p],I=fa[p];T[A]&&T[A].checked?(aa(p,!1),ha++,ia+=A,0===p?U=!0:F&&(U?F.style.display="unset":(U=!0,F.style.display="none")),I&&(I.style.display="unset")):
(aa(p,!0),F&&(F.style.display="none"),I&&(I.style.display="none"))}e=ha;d=ia;u=e;y=f[d];l=h["default"].cardRoot.getElementsByClassName(a.totalLabel)[0];v=h["default"].cardRoot.getElementsByClassName(a.totalAmount)[0];t=h["default"].cardRoot.getElementsByClassName(a.addItems)[0];n=h["default"].cardRoot.getElementsByClassName(a.chooseItems)[0];m=h["default"].cardRoot.getElementsByClassName(a.actionDetails)[0];z=h["default"].cardRoot.getElementsByClassName(a.sidePanel)[0];C=h["default"].cardRoot.getElementsByClassName(a.buttonSectionState)[0];
0===u?(t&&(t.style.display="none"),l&&(l.style.display="none"),n&&(n.style.display="unset"),m&&(m.style.visibility="hidden"),z&&(z.style.display="none"),C&&(C.style.pointerEvents="none")):y?(l&&v&&(v.innerText=y,l.style.display="block"),t&&(t.style.display="none"),n&&(n.style.display="none"),m&&(m.style.visibility="visible"),z&&(z.style.display="flex"),C&&(C.style.pointerEvents="fill")):(t&&(t.style.display="inline-block"),n&&(n.style.display="none"),l&&(l.style.display="none"),m&&(m.style.visibility=
"visible"),z&&(z.style.display="flex"));b&&g&&k&&(O=h["default"].cardRoot.getElementsByClassName(a.pointsAmount)[0],D=h["default"].cardRoot.getElementsByClassName(a.totalPointsLabel)[0],(ba=k[d])?D&&O&&(O.innerText=ba,D.style.display="block"):D&&(D.style.display="none"));G=void 0;b&&b.dataset.optimalPrice&&(G=JSON.parse(b.dataset.optimalPrice));b&&g&&G&&(w=h["default"].cardRoot.getElementsByClassName(a.totalLabelDiscount)[0],E=h["default"].cardRoot.getElementsByClassName(a.totalLabelStandard)[0],
(H=G[d])?(w&&(w.style.display="block",P=w.getElementsByClassName(a.discountPercent)[0],Q=w.getElementsByClassName(a.discountWhole)[0],R=w.getElementsByClassName(a.discountFractional)[0],S=w.getElementsByClassName(a.discountStrikethrough)[0],P&&(P.innerText=H.discountPercent),Q&&(Q.innerText=H.bundlePriceWhole),R&&(R.innerText=H.bundlePriceFractional),S&&(ca=f?f[d]:"",S.innerText=ca)),E&&(E.style.display="none")):(w&&(w.style.display="none"),E&&(E.style.display="block")))}return[2]})})},Da=function(){return x.__awaiter(void 0,
void 0,void 0,function(){var a;return x.__generator(this,function(e){if(a=h["default"].cardRoot.getElementsByClassName("add-to-cart-data")[0])a.onclick=function(d){var b=a;d.preventDefault();Ca();b.submit()};return[2]})})},Ca=function(){var a=h["default"].cardRoot.getElementsByClassName("cardRoot")[0],e=a.dataset.spClickUrl;if(e){var d=!1;if(a&&a.dataset.components){a=JSON.parse(a.dataset.components);for(var b in a)a[b].checked&&a[b].sponsored&&(d=!0)}e&&d&&Y["default"].get(e,Ba).then(function(){}).catch(function(){})}},
J;(function(a){a.clickHandler="clickHandler";a.checkHandler="checkHandler";a.popupHandler="popupHandler";a.discountPopupHandler="discountPopupHandler";a.tabClickHandler="tabClickHandler";a.clickHandlerBottomSheet="clickHandlerBottomSheet";a.checkboxHandlerBottomSheet="checkboxHandlerBottomSheet"})(J||(J={}));var q={simsFbtContainter:"_p13n-desktop-sims-fbt_fbt-desktop_sims-fbt-containter__2Cffh",flexFbtContainer:"_p13n-desktop-sims-fbt_fbt-desktop_flex-fbt-container__3fI_9",fbtCard:"_p13n-desktop-sims-fbt_fbt-desktop_fbt-card__1_smM",
detailImageSection:"_p13n-desktop-sims-fbt_fbt-desktop_detail-image-section__1Bw2r",imageBackground:"_p13n-desktop-sims-fbt_fbt-desktop_image-background__DVFnZ",imageDisplay:"_p13n-desktop-sims-fbt_fbt-desktop_image-display__2oZhY",linkArea:"_p13n-desktop-sims-fbt_fbt-desktop_link-area__1VLAZ",thumbnailBox:"_p13n-desktop-sims-fbt_fbt-desktop_thumbnail-box__4jnIT",newThumbnailBox:"_p13n-desktop-sims-fbt_fbt-desktop_new-thumbnail-box__36bD3",twoItemThumbnailBox:"_p13n-desktop-sims-fbt_fbt-desktop_two-item-thumbnail-box__jV2am",
newDetailFaceoutBox:"_p13n-desktop-sims-fbt_fbt-desktop_new-detail-faceout-box___WyNy",fbtCheckbox:"_p13n-desktop-sims-fbt_fbt-desktop_fbt-checkbox__GSgEz",titleComponentOverflow3:"_p13n-desktop-sims-fbt_fbt-desktop_title-component-overflow3__26ly1",titleSection:"_p13n-desktop-sims-fbt_fbt-desktop_title-section__16zUG",displayFlex:"_p13n-desktop-sims-fbt_fbt-desktop_display-flex__1gorZ",priceSection:"_p13n-desktop-sims-fbt_fbt-desktop_price-section__1Wo6p",thumbnailPlus:"_p13n-desktop-sims-fbt_fbt-desktop_thumbnail-plus__zdWox",
thumbnailPlusNew:"_p13n-desktop-sims-fbt_fbt-desktop_thumbnail-plus-new__2nZz1",plusPadding:"_p13n-desktop-sims-fbt_fbt-desktop_plus-padding__21zgg",productBox:"_p13n-desktop-sims-fbt_fbt-desktop_product-box__3PBxY",itemDetailsPerAsin:"_p13n-desktop-sims-fbt_fbt-desktop_item-details-per-asin__3DtF1",itemDeliveryMessagePerAsin:"_p13n-desktop-sims-fbt_fbt-desktop_item-delivery-message-per-asin__WQ7q7",fbtItemCheck:"_p13n-desktop-sims-fbt_fbt-desktop_fbt-item-check__pUIoy",addAllButton:"_p13n-desktop-sims-fbt_fbt-desktop_add-all-button__1TRXG",
totalLabel:"_p13n-desktop-sims-fbt_fbt-desktop_total-label__dI983",labelCenter:"_p13n-desktop-sims-fbt_fbt-desktop_label-center__L5TW-",totalPointsLabel:"_p13n-desktop-sims-fbt_fbt-desktop_total-points-label__3r09H",addItems:"_p13n-desktop-sims-fbt_fbt-desktop_add-items__16weX",chooseItems:"_p13n-desktop-sims-fbt_fbt-desktop_choose-items__15UQx",updatedChooseItems:"_p13n-desktop-sims-fbt_fbt-desktop_updated-choose-items__3BN67",totalAmount:"_p13n-desktop-sims-fbt_fbt-desktop_total-amount__wLVdU",
pointsAmount:"_p13n-desktop-sims-fbt_fbt-desktop_points-amount__1SNdT",priceAddToCartBox:"_p13n-desktop-sims-fbt_fbt-desktop_price-add-to-cart-box__3OUdK",pricePointsBox:"_p13n-desktop-sims-fbt_fbt-desktop_price-points-box__1xGfe",shipMessageBox:"_p13n-desktop-sims-fbt_fbt-desktop_ship-message-box__t-OOr",shippingInfoShowBox:"_p13n-desktop-sims-fbt_fbt-desktop_shipping-info-show-box__17yWM",showDetailsBox:"_p13n-desktop-sims-fbt_fbt-desktop_show-details-box__-R3Xb",showDetails:"_p13n-desktop-sims-fbt_fbt-desktop_show-details__3GnPL",
shiftDetails:"_p13n-desktop-sims-fbt_fbt-desktop_shift-details__gffZp",hideDetails:"_p13n-desktop-sims-fbt_fbt-desktop_hide-details__28l17",simsFbtUnselectedItem:"_p13n-desktop-sims-fbt_fbt-desktop_sims-fbt-unselected-item__VQmZx",simsFbtRows:"_p13n-desktop-sims-fbt_fbt-desktop_sims-fbt-rows__2LJXs",bucketDivider:"_p13n-desktop-sims-fbt_fbt-desktop_bucket-divider__25poP",titleTruncate:"_p13n-desktop-sims-fbt_fbt-desktop_title-truncate__1pPAM",detailRowElement:"_p13n-desktop-sims-fbt_fbt-desktop_detail-row-element__2WDgq",
detailRowElementLeftMargin:"_p13n-desktop-sims-fbt_fbt-desktop_detail-row-element-left-margin__UkZ8O",actionDetails:"_p13n-desktop-sims-fbt_fbt-desktop_action-details__18ZiI",actionSection:"_p13n-desktop-sims-fbt_fbt-desktop_action-section__mpQSG",sidePanel:"_p13n-desktop-sims-fbt_fbt-desktop_side-panel__23vsu",totalLabelDiscount:"_p13n-desktop-sims-fbt_fbt-desktop_total-label-discount__22kv9",totalLabelStandard:"_p13n-desktop-sims-fbt_fbt-desktop_total-label-standard__1E_7d",discountTotal:"_p13n-desktop-sims-fbt_fbt-desktop_discount-total__3gWY9",
standardTotal:"_p13n-desktop-sims-fbt_fbt-desktop_standard-total__2a-7Q",discountTotalHeading:"_p13n-desktop-sims-fbt_fbt-desktop_discount-total-heading__ZgTBX",discountPercent:"_p13n-desktop-sims-fbt_fbt-desktop_discount-percent__2eDIi",discountSymbol:"_p13n-desktop-sims-fbt_fbt-desktop_discount-symbol__3pQa1",discountWhole:"_p13n-desktop-sims-fbt_fbt-desktop_discount-whole__1RPjd",discountDecimal:"_p13n-desktop-sims-fbt_fbt-desktop_discount-decimal__2btcX",discountFractional:"_p13n-desktop-sims-fbt_fbt-desktop_discount-fractional__3qM96",
discountStrikethrough:"_p13n-desktop-sims-fbt_fbt-desktop_discount-strikethrough__183L7",discountExperimentHeader:"_p13n-desktop-sims-fbt_fbt-desktop_discount-experiment-header__NotSF",discountTitle:"_p13n-desktop-sims-fbt_fbt-desktop_discount-title__2VmTd",discountTerms:"_p13n-desktop-sims-fbt_fbt-desktop_discount-terms__x_9hA",itemTitle:"_p13n-desktop-sims-fbt_fbt-desktop_item-title__2fMKO",energyLabel:"_p13n-desktop-sims-fbt_fbt-desktop_energy-label__23Bpn",sponsoredLabel:"_p13n-desktop-sims-fbt_fbt-desktop_sponsored-label__2Ap87"};
V._operationNames=[];V.card=function(){return x.__awaiter(void 0,void 0,void 0,function(){var a,e;return x.__generator(this,function(d){switch(d.label){case 0:a=X["default"].setup().define;if(!h["default"].cardRoot)return[2];sa();return[4,Promise.all([za.setupModal(h["default"].cardRoot.getElementsByClassName("cardRoot")[0]),Da()])];case 1:return d.sent(),ja(q),e=!0,a(J.clickHandler,"click",function(b){if(b.event.target){b=h["default"].cardRoot.getElementsByClassName(q.shippingInfoShowBox);var c=
h["default"].cardRoot.getElementsByClassName(q.showDetails)[0],g=h["default"].cardRoot.getElementsByClassName(q.hideDetails)[0];c&&(e?(c.style.display="none",g.style.display="unset",b&&([].forEach.call(b,function(f,k){f.style.display="block"}),e=!1)):(c.style.display="unset",g.style.display="none",b&&[].forEach.call(b,function(f,k){f.style.display="none"}),e=!0))}}),a(J.checkHandler,"click",function(b){var c=b.event,g=c.target;b=null;if(g){if("fbtCheck"!==g.id.substr(0,8))return;b=c.target.checked}for(var f=
g;f&&!f.classList.contains(q.fbtItemCheck)&&!f.classList.contains(q.fbtCheckbox);)f=f.parentElement;if(f){c=f.id;g=h["default"].cardRoot.getElementsByClassName("cardRoot")[0];var k=void 0;g&&g.dataset.components&&(k=JSON.parse(g.dataset.components));k&&k[c]&&null!==b&&(k[c].checked=b);k&&k[c].checked&&(f.classList.contains(q.simsFbtUnselectedItem)&&f.classList.remove(q.simsFbtUnselectedItem),f.classList.contains(q.fbtCheckDetails)||f.classList.add(q.fbtCheckDetails));k&&!k[c].checked&&(f.classList.remove(q.fbtCheckDetails),
f.classList.add(q.simsFbtUnselectedItem));b=h["default"].cardRoot.getElementsByClassName("itemLinkTitle-"+c)[0];f=h["default"].cardRoot.getElementsByClassName("itemTitle-"+c)[0];b&&f&&(k&&k[c].checked&&(b.style.display="unset",f.style.display="none"),k&&!k[c].checked&&(b.style.display="none",f.style.display="unset"));g.dataset.components=JSON.stringify(k);ja(q)}}),[2]}})})}});
